// src/components/Nodes/TextMessageNode.tsx
import React from 'react';
import { Handle, Position, NodeProps } from 'reactflow';
import './node-styles.css';

// A simple component to display a WhatsApp icon
const WhatsAppIcon = () => (
    <svg height="20px" width="20px" version="1.1" viewBox="0 0 448 448">
      <path fill="#25D366" d="M164.3,219.8c0.8,1.4,1.6,2.8,2.5,4.2c3.2,5.2,6.5,10.4,9.7,15.6c4.6,7.3,9.2,14.6,13.8,21.9c0.2,0.3,0.4,0.6,0.6,0.9 l-0.2,0.2c-2.3-1.6-4.6-3.1-6.9-4.7c-9-6.1-18.1-12.2-27.1-18.3c-2.4-1.6-4.8-3.3-7.2-4.9l-0.1,0.1c-6.8,8.4-13.7,16.8-20.5,25.2 c-1.5,1.8-3.1,3.7-4.6,5.5c-0.1,0.1-0.2,0.2-0.3,0.3l-0.3-0.2c-5-3.3-9.9-6.5-14.9-9.8c-12.2-8.1-24.5-16.2-36.7-24.3 c-2.9-1.9-5.9-3.9-8.8-5.8c-0.1-0.1-0.3-0.2-0.4-0.3l-0.3-0.3c7.2-9.4,14.3-18.7,21.5-28.1c1.2-1.6,2.4-3.1,3.6-4.7l0,0 c1.6,1.2,3.2,2.5,4.8,3.7c11,8.3,22.1,16.6,33.1,24.9c3.3,2.5,6.5,4.9,9.8,7.4L164.3,219.8z"/>
      <path fill="#FFFFFF" d="M380.9,67.1C340.5,26.7,284.1,4,228.4,4C126.8,4,44.8,86.1,44.8,187.7c0,35.2,10.2,68.9,28.2,97.2L4,444l132.8-34.8 c27.5,16.5,58.8,26.2,91.6,26.2c101.6,0,183.6-82,183.6-183.6C410.5,125.5,401.5,87.2,380.9,67.1z M228.4,402.2 c-29.1,0-57.1-8.5-81.8-24.4l-5.8-3.4l-60.8,16l16.2-59.5l-3.8-6C68.9,300.2,59,266.3,59,231.1c0-93.5,76-169.5,169.5-169.5 c45.9,0,88.4,17.8,120,49.4c31.5,31.5,49.4,74.2,49.4,120C397.9,326.2,321.9,402.2,228.4,402.2z M329.1,273.6 c-5.2-2.6-31-15.3-35.8-17c-4.8-1.7-8.3-2.6-11.8,2.6c-3.5,5.2-13.5,17-16.6,20.4c-3.1,3.5-6.2,3.9-11.4,1.3 c-5.2-2.6-22-8.1-41.9-25.8c-15.5-13.8-25.9-30.8-30.1-36c-4.2-5.2-0.4-8,2.3-10.6c2.3-2.2,5.2-5.7,7.8-8.6 c2.6-2.9,3.5-5.2,5.2-8.6c1.7-3.5,0.8-6.5-0.4-9.1c-1.3-2.6-11.8-28.5-16.2-39C133,83.5,129.5,84.4,125.7,84.4 c-3.5,0-7.8,0.4-11.8,2.6c-4,2.2-10.2,5.2-15.4,12.2c-5.2,7-19.8,19.3-19.8,47c0,27.7,20.3,54.5,23.2,58 c2.9,3.5,40.1,64.2,98.1,86.3c14.2,5.2,25.3,8.3,34,10.6c13.2,3.5,25.3,3.1,34.8,1.7c10.6-1.5,31-12.6,35.4-24.8 c4.3-12.2,4.3-22.7,3.1-24.8C340.5,276.2,334.3,275.9,329.1,273.6z"/>
    </svg>
);

export const TextMessageNode: React.FC<NodeProps> = ({ data, isSelected }) => {
  return (
    <div className={`text-message-node ${isSelected ? 'selected' : ''}`}>
      <Handle
        type="target"
        position={Position.Left}
        className="handle"
      />
      <div className="node-header">
        <span className="header-text">Send Message</span>
        <div className="whatsapp-icon-wrapper">
          <WhatsAppIcon />
        </div>
      </div>
      <div className="node-body">
        {data.label || 'text message'}
      </div>
      <Handle
        type="source"
        position={Position.Right}
        className="handle"
      />
    </div>
  );
};